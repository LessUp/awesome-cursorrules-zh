---
description: 数据库最佳实践，重点关注 Prisma 和 Supabase 集成
globs: prisma/**/*, src/db/**/*, **/*.prisma, supabase/**/*
---

# 数据库最佳实践

## Prisma 设置
- 使用正确的模式设计
- 实现正确的迁移
- 使用正确的关​​系定义
- 配置正确的连接
- 实现正确的种子数据填充
- 使用正确的客户端设置

## Prisma 模型
- 使用正确的模型命名
- 实现正确的关​​系
- 使用正确的字段类型
- 定义正确的索引
- 实现正确的约束
- 使用正确的枚举

## Prisma 查询
- 使用正确的查询优化
- 实现正确的过滤
- 使用正确的关​​系加载
- 正确处理事务
- 实现正确的分页
- 使用正确的聚合

## Supabase 设置
- 配置正确的项目设置
- 实现正确的身份验证
- 使用正确的数据库设置
- 配置正确的存储
- 实现正确的策略
- 使用正确的客户端设置

## Supabase 安全
- 实现正确的 RLS 策略
- 使用正确的身份验证
- 配置正确的权限
- 正确处理敏感数据
- 实现正确的备份
- 使用正确的加密

## Supabase 查询
- 使用正确的查询优化
- 实现正确的过滤
- 使用正确的连接
- 正确处理实时数据
- 实现正确的分页
- 使用正确的函数

## 数据库设计
- 使用正确的规范化
- 实现正确的索引
- 使用正确的约束
- 定义正确的关​​系
- 实现正确的级联操作
- 使用正确的数据类型

## 性能
- 使用正确的连接池
- 实现正确的缓存
- 使用正确的查询优化
- 正确处理 N+1 查询问题
- 实现正确的批处理
- 监控性能指标

## 安全
- 使用正确的身份验证
- 实现正确的授权
- 正确处理敏感数据
- 使用正确的加密
- 实现正确的备份
- 监控安全问题

## 最佳实践
- 遵循数据库约定
- 使用正确的迁移
- 实现正确的版本控制
- 正确处理错误
- 正确记录模式文档
- 监控数据库健康状况
